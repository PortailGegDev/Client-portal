@if(groupedContracts.length > 0) {

@for (address of groupedContracts; track address.key) {
<div [ngClass]="{'inactive-style': !activeContract}">
    @if(activeContract){

    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <circle cx="16.5" cy="14" r="7.5" fill="#E2F133" />
        <path
            d="M3.82696 6.74844V12.6153C3.82696 14.1501 3.82696 14.9175 4.12565 15.5037C4.38838 16.0193 4.80762 16.4386 5.32326 16.7013C5.90947 17 6.67687 17 8.21166 17H12.231C13.7657 17 14.5331 17 15.1194 16.7013C15.635 16.4386 16.0542 16.0193 16.317 15.5037C16.6157 14.9175 16.6157 14.1501 16.6157 12.6153V2.38434M18.4426 8.77869L13.4795 3.26491C12.3507 2.01092 11.7863 1.38392 11.1217 1.15245C10.5379 0.949139 9.90249 0.949186 9.31873 1.15258C8.6541 1.38415 8.08981 2.01123 6.96123 3.26539L2 8.77869M12.0483 17V11.5191H8.39435V17"
            stroke="#1E1E1E" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
    }@else{
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <circle cx="16.5" cy="14" r="7.5" fill="#544E4E" fill-opacity="0.2" />
        <path
            d="M3.82696 6.74844V12.6153C3.82696 14.1501 3.82696 14.9175 4.12565 15.5037C4.38838 16.0193 4.80762 16.4386 5.32326 16.7013C5.90947 17 6.67687 17 8.21166 17H12.231C13.7657 17 14.5331 17 15.1194 16.7013C15.635 16.4386 16.0542 16.0193 16.317 15.5037C16.6157 14.9175 16.6157 14.1501 16.6157 12.6153V2.38434M18.4426 8.77869L13.4795 3.26491C12.3507 2.01092 11.7863 1.38392 11.1217 1.15245C10.5379 0.949139 9.90249 0.949186 9.31873 1.15258C8.6541 1.38415 8.08981 2.01123 6.96123 3.26539L2 8.77869M12.0483 17V11.5191H8.39435V17"
            stroke="#544E4E" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
    }

    {{address.key}}

    @for(contract of address.value; track contract.number){
    <div class="mt-3">
        <p-panel class="listing-box">
            <div class="row" style="width: 100%;">
                <div class="col-sm-3">
                    @if(activeContract){
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <circle cx="16.5" cy="16.5" r="7.5" fill="#E2F133" />
                        <path
                            d="M11.1111 3H6.84444C5.8488 3 5.35097 3 4.97068 3.19377C4.63617 3.36421 4.36421 3.63617 4.19377 3.97068C4 4.35097 4 4.8488 4 5.84444V16.1556C4 17.1512 4 17.649 4.19377 18.0293C4.36421 18.3638 4.63617 18.6358 4.97068 18.8062C5.35097 19 5.8488 19 6.84444 19H13.6C14.5956 19 15.0935 19 15.4738 18.8062C15.8083 18.6358 16.0802 18.3638 16.2507 18.0293C16.4444 17.649 16.4444 17.1512 16.4444 16.1556V8.33333M11.1111 3L16.4444 8.33333M11.1111 3V6.91111C11.1111 7.40894 11.1111 7.65785 11.208 7.84799C11.2932 8.01525 11.4292 8.15123 11.5965 8.23645C11.7866 8.33333 12.0355 8.33333 12.5333 8.33333H16.4444M6.66667 5.66667H8.44444M6.66667 8.33333H8.44444M13.7778 15.4444H12L11.1111 14.1111L10.2222 15.4444L8.44444 12.7778L8 15.4444H6.66667"
                            stroke="#3A3A3A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    }@else{
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <circle cx="16.5" cy="16.5" r="7.5" fill="#544E4E" fill-opacity="0.2" />
                        <path
                            d="M11.1111 3H6.84444C5.8488 3 5.35097 3 4.97068 3.19377C4.63617 3.36421 4.36421 3.63617 4.19377 3.97068C4 4.35097 4 4.8488 4 5.84444V16.1556C4 17.1512 4 17.649 4.19377 18.0293C4.36421 18.3638 4.63617 18.6358 4.97068 18.8062C5.35097 19 5.8488 19 6.84444 19H13.6C14.5956 19 15.0935 19 15.4738 18.8062C15.8083 18.6358 16.0802 18.3638 16.2507 18.0293C16.4444 17.649 16.4444 17.1512 16.4444 16.1556V8.33333M11.1111 3L16.4444 8.33333M11.1111 3V6.91111C11.1111 7.40894 11.1111 7.65785 11.208 7.84799C11.2932 8.01525 11.4292 8.15123 11.5965 8.23645C11.7866 8.33333 12.0355 8.33333 12.5333 8.33333H16.4444M6.66667 5.66667H8.44444M6.66667 8.33333H8.44444M13.7778 15.4444H12L11.1111 14.1111L10.2222 15.4444L8.44444 12.7778L8 15.4444H6.66667"
                            stroke="#544E4E" stroke-opacity="0.7" stroke-width="1.5" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    }
                    &nbsp;
                    <label>Contrat n° {{contract.ContractISU}}</label>
                </div>

                <div class="col-sm-6">
                    @if(contract.BusinessSectorText === 'Electricité'){
                    <svg class="custom-icon" style="display: inline; margin-right: 10px;"
                        [ngStyle]="{ 'background-color': activeContract ? '' : 'rgba(84, 78, 78, 0.60)' }"
                        xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M8.86784 1.54223C9.07332 1.63247 9.1935 1.84857 9.16176 2.07074L8.57662 6.1667L12.2278 6.1667C12.3904 6.16668 12.5448 6.16666 12.6691 6.17793C12.7886 6.18876 12.9847 6.21595 13.1521 6.35046C13.3509 6.51024 13.4656 6.75228 13.4633 7.00734C13.4615 7.22206 13.3583 7.39103 13.2911 7.49037C13.2211 7.59369 13.1233 7.7132 13.0203 7.83901L7.72043 14.3166C7.57832 14.4903 7.33788 14.5481 7.1324 14.4578C6.92692 14.3676 6.80674 14.1515 6.83848 13.9293L7.42361 9.83336L3.7724 9.83336C3.60983 9.83338 3.4554 9.8334 3.33112 9.82213C3.21163 9.8113 3.01555 9.78411 2.84818 9.6496C2.64936 9.48982 2.53466 9.24778 2.5369 8.99272C2.53878 8.778 2.6419 8.60903 2.70918 8.50969C2.77916 8.40637 2.87696 8.28686 2.97992 8.16105L8.27981 1.68341C8.42192 1.50972 8.66235 1.45199 8.86784 1.54223ZM7.9182 3.70455L3.76645 8.77892C3.75075 8.7981 3.73595 8.81621 3.72199 8.83332C3.74408 8.83335 3.76746 8.83336 3.79225 8.83336H8.00012C8.14506 8.83336 8.28288 8.89626 8.37784 9.00576C8.47281 9.11526 8.51559 9.26059 8.49509 9.40407L8.08203 12.2955L12.2338 7.22114C12.2495 7.20196 12.2643 7.18385 12.2782 7.16673C12.2562 7.1667 12.2328 7.1667 12.208 7.1667H8.00012C7.85517 7.1667 7.71736 7.1038 7.62239 6.9943C7.52742 6.8848 7.48464 6.73948 7.50514 6.59599L7.9182 3.70455Z"
                            fill="white" />
                    </svg>
                    }

                    @if(contract.BusinessSectorText === 'Gaz'){
                    <svg class="custom-icon1" style="display: inline; margin-right: 10px;"
                        [ngStyle]="{ 'background-color': activeContract ? '' : 'rgba(84, 78, 78, 0.60)' }"
                        xmlns="http://www.w3.org/2000/svg" width="10" height="17" viewBox="0 0 10 17" fill="none">
                        <path
                            d="M7.0404 5.13914C6.07438 3.41048 5.09734 2.12417 5.08632 2.11253L5 2L4.91368 2.11253C4.9045 2.12611 3.92562 3.41048 2.9596 5.13914C1.65932 7.4673 1 9.45011 1 11.0294C1 14.3276 2.34619 16 5 16C7.65381 16 9 14.3276 9 11.0294C9 9.45011 8.34068 7.4673 7.0404 5.13914ZM3.2259 13.5011C3.2259 11.9781 4.63636 9.94485 5 9.44429C5.36547 9.94485 6.7741 11.9762 6.7741 13.5011C6.7741 15.0261 6.19376 15.7148 5 15.7148C3.80624 15.7148 3.2259 14.9911 3.2259 13.5011ZM6.16804 15.6314C6.71717 15.255 6.99633 14.5449 6.99633 13.5011C6.99633 11.6774 5.16345 9.28326 5.08632 9.18237L5.00184 9.07178L4.91735 9.18237C4.84022 9.28326 3.00735 11.6774 3.00735 13.5011C3.00735 14.543 3.2865 15.255 3.83563 15.6314C2.08356 15.1968 1.22406 13.6815 1.22406 11.0294C1.22406 7.66519 4.43251 3.14856 5.00367 2.37445C5.573 3.1505 8.78329 7.66713 8.78329 11.0294C8.78329 13.6815 7.92378 15.1968 6.17172 15.6314H6.16804Z"
                            stroke="white" stroke-width="1.5" />
                    </svg>
                    }
                    &nbsp;
                    <label>{{ contract.BusinessSectorText }} </label>

                    @if(contract.TarifOption){
                    <label> - {{ contract.TarifOption }} </label>
                    }

                    @if(contract.Power_BTINF){
                    <label> - {{ contract.Power_BTINF }}</label>
                    }

                    <label style="color: rgba(84, 78, 78, 0.6);">
                        &nbsp; depuis {{contract.ContractStart | timeSpanToDate:'short'}}
                    </label>
                </div>

                <div class="col-sm-3" style="text-align: right;">
                    <p-button icon="pi pi-arrow-right" iconPos="right" severity="help"
                        (click)="viewDetails(contract.ContractISU)" [text]="true" label="Voir les détails" />
                </div>
            </div>
        </p-panel>
    </div>
    }
</div>
}

} @else{
<p-message severity="info" styleClass="h-full">
    <i class="pi pi-info-circle" style="font-size: 1rem"></i>
    Information : vous n’avez aucun contrat {{activeContract ? 'actif' :'résilié '}} pour le moment.
</p-message>
}